<?xml version="1.0" encoding="UTF-8" ?>
<templates>
    <t t-name="bms.object_type_notebook" owl="1">

        <t t-log="props"/>
        <!-- <t t-log="existingOtls" /> -->
        <t t-log="attributes"/>

        <nav>
            <div class="nav nav-tabs" id="nav-tab-otl" role="tablist">
                <!-- feed each tab with one OTL -->

                <t t-foreach="attributes" t-as="otl" t-key="otl.otlId">
                    <button t-attf-class="nav-link {{(otl_first)? 'active' : ''}}" t-attf-id="nav-otl-{{otl_index}}-tab" data-bs-toggle="tab" t-attf-data-bs-target="#nav-otl-{{otl_index}}" type="button" role="tab" t-attf-aria-controls="nav-otl-{{otl_index}}" t-attf-aria-selected="{{ (otl_first)? 'true' : 'false' }}">
                        <span t-out="otl.otlName"/>
                    </button>
                </t>
            </div>
        </nav>


        <div class="tab-content" id="nav-tabContent-otl">
            <t t-foreach="attributes" t-as="attribute" t-key="attribute.otlId">
                <!-- no type assigned yet to an OTL-->
                <!-- <t t-log="attrDefIdsbyType.length == 0"/>
                <t t-if="attrDefIdsbyType.length == 0">
                <button class="btn btn-primary" t-on-click="() => this.change_otl_and_type()">
                    <i class="fa fa-plus-square" aria-hidden="true"></i>
                    <span> add a type</span>
                </button>
                </t> -->
                <!-- feed tab with its type -->
                <div t-attf-class="tab-pane fade {{(attribute_first) ? 'show active' : ''}}" t-attf-id="nav-otl-{{attribute_index}}" role="tabpanel" t-attf-aria-labelledby="nav-otl-{{attribute_index}}-tab">
                    <!-- no type assigned yet to an OTL-->
                    <t t-if="!(attribute.objectTypeId)">
                        <button class="btn btn-primary" t-on-click="() => this.change_otl_and_type(attribute.otlId)">
                            <i class="fa fa-plus-square" aria-hidden="true"></i>
                            <span> add a type</span>
                        </button>
                    </t>
                    <!-- type assigned yet to an OTL-->
                    <t t-if="(attribute.objectTypeId)">
                        <div>
                            <span class="o_form_label">type  </span>
                            <span t-out="attribute.objectTypeName"/>
                            <button class="btn btn-primary" t-on-click="() => this.change_otl_and_type(attribute.otlId, attribute.objectTypeId)">
                                <i class="fa fa-pencil" aria-hidden="true"></i>
                            </button>
                        </div>
                        <!-- for each type display attributes definition and if exists the assigned value -->
                        <t t-foreach="attribute.attrDefRecords" t-as="attrDefRecord" t-key="attrDefRecord.id">
                            <div>
                                <span class="o_form_label">
                                    <t t-out="attrDefRecord.display_name"/>
                                </span>

                                <!-- <t t-if="attribute.value_type == 'char'">
                                    <span>
                                        <t t-out="attribute.value_string" />
                                    </span>
                                </t>
                                <t t-if="attribute.value_type == 'boolean'">
                                    <span>
                                        <t t-out="attribute.value_boolean" />
                                    </span>
                                </t>
                                <t t-if="attribute.value_type == 'date'">
                                    <span>
                                        <t t-out="attribute.value_date" />
                                    </span>
                                </t>
                                <t t-if="attribute.value_type == 'integer'">
                                    <span>
                                        <t t-out="attribute.value_integer" />
                                    </span>
                                </t> -->
                            </div>
                        </t>
                    </t>
                </div>
            </t>
        </div>
    </t>
</t>
</templates>